<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja-jp" lang="ja-jp">
<head>
	<meta name="google-site-verification" content="VMX1kh-V3BSObE24TCzxpQmq7E4R2LP72EaPSE1-FmA" />
	
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-176109591-1"></script>
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'UA-176109591-1');
	</script>
	
	<script type="text/javascript">
		(function(c,l,a,r,i,t,y){
			c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
			t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
			y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
		})(window, document, "clarity", "script", "4tuboxi7z1");
	</script>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="generator" content="Hugo 0.74.2" />

	<title>BOOK☆WALKER読み放題用のChrome拡張機能作った &middot; i175s blog</title>

	<meta name="description" content="BOOK☆WALKER読み放題の連載お気に入り機能が微妙に使いにくかったので自分で拡張機能を作成してみました。" />

	

<meta itemprop="name" content="BOOK☆WALKER読み放題用のChrome拡張機能作った">
<meta itemprop="description" content="BOOK☆WALKER読み放題の連載お気に入り機能が微妙に使いにくかったので自分で拡張機能を作成してみました。">
<meta itemprop="datePublished" content="2021-09-27T10:05:39&#43;09:00" />
<meta itemprop="dateModified" content="2021-09-27T10:05:39&#43;09:00" />
<meta itemprop="wordCount" content="2707">



<meta itemprop="keywords" content="BOOK☆WALKER," />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="BOOK☆WALKER読み放題用のChrome拡張機能作った"/>
<meta name="twitter:description" content="BOOK☆WALKER読み放題の連載お気に入り機能が微妙に使いにくかったので自分で拡張機能を作成してみました。"/>


<meta property="og:title" content="BOOK☆WALKER読み放題用のChrome拡張機能作った" />
<meta property="og:description" content="BOOK☆WALKER読み放題の連載お気に入り機能が微妙に使いにくかったので自分で拡張機能を作成してみました。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.inago.info/post/bw_favlist/" />
<meta property="article:published_time" content="2021-09-27T10:05:39+09:00" />
<meta property="article:modified_time" content="2021-09-27T10:05:39+09:00" /><meta property="og:site_name" content="i175s" />



	<script>
    MathJax = {
        tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
    };
</script>

<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>


	<link type="text/css"
				rel="stylesheet"
				href="/css/print.css"
				media="print">

	<link type="text/css"
				rel="stylesheet"
				href="/css/poole.css">

	<link type="text/css"
				rel="stylesheet"
				href="/css/hyde.css">

	
<style type="text/css">
  .sidebar {
    background-color: #0573c7;
  }

  .read-more-link a {
    border-color: #0573c7;
  }

  .pagination li a {
    color: #0573c7;
    border: 1px solid #0573c7;
  }

  .pagination li.active a {
    background-color: #0573c7;
  }

  .pagination li a:hover {
    background-color: #0573c7;
    opacity: 0.75;
  }

  footer a,
  .content a,
  .related-posts li a:hover {
    color: #0573c7;
  }
</style>



	<link type="text/css" rel="stylesheet" href="/css/custom.css">

	<link rel="stylesheet"
				href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap">

	<link rel="stylesheet"
				href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
				integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
				crossorigin="anonymous" />

	<link rel="apple-touch-icon-precomposed"
				sizes="144x144"
				href="/apple-touch-icon-144-precomposed.png">

	<link rel="shortcut icon" href="/favicon.png">

	
	</head>
<body>
	<aside class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      
        
        <div class="author-image">
          <img src="/images/profile.png" class="img-circle img-headshot center" alt="Profile Picture">
        </div>
        
      

      <a href="https://blog.inago.info" style="text-decoration: none;"><h1>i175s blog</h1></a>

      
      <p class="lead">i175sの雑記</p>
      
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li>
          <a href="https://blog.inago.info">Home</a>
        </li>
        <li>
          <a href="/about/">About</a>
        </li><li>
          <a href="/post/">Posts</a>
        </li><li>
          <a href="/categories/">Categories</a>
        </li><li>
          <a href="/tags/">Tags</a>
        </li>
      </ul>
    </nav>

    <section class="social-icons">
      
      <a href="https://github.com/inago-s" rel="me" title="GitHub" target="_blank">
        <i class="fab fa-github" aria-hidden="true"></i>
      </a>
      
      <a href="https://twitter.com/i175s" rel="me" title="Twitter" target="_blank">
        <i class="fab fa-twitter" aria-hidden="true"></i>
      </a>
      
    </section>
  </div>
</aside>


	<main class="content container">
	<section class="section sns_parent">
	<div class="sns_box">
		<span class="share_text">Share</span>
		<span class="sns_icon">
		  <a href="http://twitter.com/intent/tweet?url=https%3a%2f%2fblog.inago.info%2fpost%2fbw_favlist%2f&text=i175s blog %7C%0D%0A BOOK%e2%98%86WALKER%e8%aa%ad%e3%81%bf%e6%94%be%e9%a1%8c%e7%94%a8%e3%81%aeChrome%e6%8b%a1%e5%bc%b5%e6%a9%9f%e8%83%bd%e4%bd%9c%e3%81%a3%e3%81%9f" target="_blank" title="Tweet"><i class="fab fa-twitter"></i></a>
		</span>
		<span class="sns_icon">
		  <a href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fblog.inago.info%2fpost%2fbw_favlist%2f&t=i175s blog %7C%0D%0A BOOK%e2%98%86WALKER%e8%aa%ad%e3%81%bf%e6%94%be%e9%a1%8c%e7%94%a8%e3%81%aeChrome%e6%8b%a1%e5%bc%b5%e6%a9%9f%e8%83%bd%e4%bd%9c%e3%81%a3%e3%81%9f" target="_blank" title="Facebook"><i class="fab fa-facebook"></i></a>
		</span>
	</div>
  </section>
	<div class="post">
  <h1>BOOK☆WALKER読み放題用のChrome拡張機能作った</h1>

  <div class="post-date">
    <time datetime="2021-09-27T10:05:39&#43;0900">Sep 27, 2021</time> &middot; 6 min read
  </div>

  <p>こんにちは。</p>
<p>突然ですがみなさんBOOK☆WALKERの読み放題は利用されていますか？<br>
私はマンガ・雑誌も文庫・ラノベもサービス開始当初から利用しているのですが、「連載お気に入り」機能に少々不満を持っていました。</p>
<p>サービスを利用している方は分かると思うのですが「連載お気に入り」について少し説明すると、雑誌に連載中のお話を「連載お気に入り」として登録しておくと最新号が配信された時に通知されたり、以下の画像のようにマイページに最近更新された連載の一覧を出してくれる機能です。</p>
<img src='/images/mypage.png' width=100% class='margin'>
<p>読み放題の前身であるマガジン☆WALKERも利用していたのですが、雑誌のお気に入り機能はあっても連載のお気に入り機能はなかったので、サービス提供開始時は便利になったと喜んでいました。</p>
<p>が、サービスを1年以上使っているとこの「連載お気に入り」機能への不満点も出てきました。</p>
<h3 id="新連載に対応していない場合が多い">新連載に対応していない場合が多い</h3>
<p>これが一番困りますね。月刊連載だと面白い新連載があったとしても、次の号（1ヶ月後）には存在を忘れていて気付くともう読み返せないことがたまにあります。<br>
新連載時点でお気に入りに登録できれば一覧に出てくるのでいいのですが、数か月登録できない（下手すると数か月できない）状況の連載もあるので困りものです。</p>
<h3 id="表記ゆれに対応してない">表記ゆれに対応してない</h3>
<p>例えば以下の作品。</p>
<img src='/images/fluctuation.png' class='margin'>
<p>連載タイトルが「波原さんはぶちまけたい！」なのですが、配信日（発売日）が消えています。これは連載が終わったり、読み放題で読める分がなくなったりするとこういう表記になります。</p>
<p>でもこの連載タイトル、普通に今でも連載をやっているので読み放題でも読めます。なぜ、拾われないのでしょう。</p>
<p>以下の画像は「波原さんはぶちまけたい！」の連載雑誌、電撃だいおうじ最新号（VOL97）の目次です。</p>
<img src='/images/butimake.png' class='margin'>
<p>登録されている連載タイトルは「波原さんはぶちまけたい！」、現在の連載タイトルは「波原さんはぶちまけたい!」<br>
「！」と「!」の違いです。全角半角です。</p>
<p>この小さな違いがあるだけで「連載お気に入り」機能は役目を果たさなくなってしまいます。</p>
<p>これに気付いた数か月前にサポートセンターにお問い合わせをしてみたのですが、現在手作業で更新しているらしく、こうした表記ゆれの対応も手作業になるそうです。</p>
<p>出版社も統一してくれよ……というお気持ち。</p>
<h3 id="一覧表示の上限">一覧表示の上限</h3>
<p>毎月27日は何の日でしょう？</p>
<p>答えは「電撃マオウ」「電撃大王」「電撃だいおうじ」「コミックキューン」「コミックアライブ」の発売日です！</p>
<p>多すぎるんだよ。この日だけで連載お気に入りが40件以上更新されます。</p>
<p>でもマイページの連載お気に入り一覧は32件の表示が限界のようです……。<br>
数日前には「少年エース」だったり「月刊アクション」だったりの更新も入ります。<br>
マイページだけじゃ管理できないのが現状です。</p>
<p>ここまでくると、読み落としがあっても無理はないでしょう。</p>
<h2 id="chrome拡張機能でなんとかできないか">Chrome拡張機能でなんとかできないか？</h2>
<p>この現状をなんとかしたい。しかしBOOK☆WALKER側にお願いしてもすぐに対応できるはずもなく。</p>
<p>卒業研究でChrome拡張機能を作成したのを思い出し、これなら自作の連載管理機能を実装できるのはと思い試してみることに。<br>
そして完成したのが<a href="https://github.com/inago-s/bw_favlist">こちら</a>。 ChromeとEdge(chromium版)で使えます。
<strong>非公式の拡張機能です。導入する場合は自己判断でお願いします。</strong></p>
<h3 id="indexed-database-apiの利用">Indexed Database APIの利用</h3>
<p>拡張機能を思いついた当初はローカルストレージに連載タイトルを保存しておけば機能の実装が可能だろうと思っていたのですが、どうやらIndexed Database APIというブラウザ標準のデータベースがあるようです。こちらはRDBMSライクに使えるDBシステムで、意外と簡単にデータの管理ができました。</p>
<p>データベースはご利用しているPC内のみに保存されます。他人からのぞかれる心配は恐らくありませんが、自身で所持しているPC間でも共有ができません。</p>
<img src='/images/indexeddb.png' class='margin'>
<p>画像みたいにシリーズと連載タイトルをKey pathにしてそれぞれお気に入り連載を管理するようにできました。</p>
<h3 id="jsの非同期処理に苦しんだ">JSの非同期処理に苦しんだ</h3>
<p>データベースの検索だったり、DOM操作だったり、こいつら全部非同期処理で上から順番に実行される保証がない。</p>
<p>普段Pythonを使っているので、コールバックを使った（でもはコールバックは古い書き方らしい）同期的な書き方をするのに苦労しました。<br>
そのうちasync/awaitに書き換えたいと思う。</p>
<h3 id="css完全に理解した">CSS完全に理解した</h3>
<p>★と既読・未読マークの設置にどれだけの時間をかけたのでしょう。</p>
<h3 id="最低限の機能の実装が完了">最低限の機能の実装が完了</h3>
<p>現在実装できた機能は以下の2つです。</p>
<ul>
<li>連載のお気に入り登録</li>
<li>その号のお気に入り連載の未読・既読の可視化</li>
</ul>
<p>見た目はこんな感じで目次を開くと★マークが現れ、押すとお気に入り連載として登録され未読・既読マークが表示されるようになります。<br>
※雑誌を開いたときに雑誌ページにアクセスしてシリーズ名を取得する関係上、開いてすぐ目次を開くとうまく機能しない場合があります。</p>
<img src='/images/ex_example.png' class='margin'>
<p>とりあえず新連載を読んだその場でお気に入り登録ができるので、次の号読み忘れるということもなくなるはずです。</p>
<p>また表記ゆれの対策として、全角英数字記号はすべて半角に変換してデータベースへ保存。参照時も半角に変換して参照するので、ある程度の表記ゆれには対応できます。</p>
<p>なお、一度拡張機能をアンインストールするとデータベースも削除されてしまいます。</p>
<h3 id="今後実装したい機能">今後実装したい機能</h3>
<p>まずは読み忘れ通知機能を実装したい。</p>
<p>読み放題雑誌の期限は取得できるので、データベースでうまく管理して期限間際になったら通知できるような仕組みを考えています。<br>
ポップアップで読んでいない連載の確認機能なども実現したいのですが、休載をどうやってデータベースで扱うか考えているところです。</p>
<p>現状ポップアップは機能していないのでどうにかしたい。</p>
<p>ついでに読み放題とは関係ありませんが、BOOK☆WALKERで買った本を読書メーターに1冊ずつ登録する作業がとてもめんどくさいので、ワンクリックで自動で登録してくれる機能もありかもしれないと思っているところです。</p>
<h2 id="おわりに">おわりに</h2>
<p>高校生の頃から愛用しているBOOK☆WALKERですが、まだまだ改善してほしいところがたくさんあります。</p>
<p>「お気に入り連載」機能についてはChrome拡張機能で手元のブラウザ環境をいじることで、改良版の機能作成が可能だったのでJSの勉強がてら作成してみました。<br>
いつか公式から機能の改善が行われると思うので、それまでは自己満足の範囲内で機能を追加していこうかなと思っています。</p>
<p>また機能の更新をしたら適当に紹介したいと思います。</p>

</div>


	</main>

	<footer>
  <div>
    &copy; i175s 2023

    &middot; <a href="https://creativecommons.org/licenses/by-sa/4.0" target="_blank">CC BY-SA 4.0</a>

    &middot; Build with <a href="https://gohugo.io/" target="_blank">Hugo</a> & <a href="https://themes.gohugo.io/soho/" target="_blank">Soho</a> theme
  </div>
</footer>


	<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"
					integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0="
					crossorigin="anonymous"></script>

	

	
</body>
</html>
